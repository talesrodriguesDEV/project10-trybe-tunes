(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{30:function(t,e,n){},41:function(t,e,n){},42:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),s=n(23),i=n.n(s),c=(n(30),n(16)),o=n(4),u=n(5),l=n(7),d=n(6),h=n(14),p=n(8),b=n(2),f=n.n(b),j=n(3),m=n(9),v="user",O=function(t){return localStorage.setItem(v,JSON.stringify(t))},g=function(t){return function(e){setTimeout((function(){e(t)}),1500)}},x=function(){return new Promise((function(t){var e=JSON.parse(localStorage.getItem(v));null===e&&(e={}),g(e)(t)}))},k=function(t){return new Promise((function(e){O(Object(c.a)(Object(c.a)({},{name:"",email:"",image:"",description:""}),t)),g("OK")(e)}))},y=function(t){return new Promise((function(e){O(Object(c.a)({},t)),g("OK")(e)}))},S=n(0),I=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(S.jsx)("span",{children:"Carregando..."})}}]),n}(a.Component),N=I,w=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).enableLoginButton=t.enableLoginButton.bind(Object(m.a)(t)),t.userLogin=t.userLogin.bind(Object(m.a)(t)),t.state={loginButtonDisabled:!0,userName:"",loading:!1},t}return Object(u.a)(n,[{key:"enableLoginButton",value:function(t){var e=t.target;e.value.length>=3?this.setState({loginButtonDisabled:!1,userName:e.value}):this.setState({loginButtonDisabled:!0,userName:e.value})}},{key:"userLogin",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state.userName,n=this.props.history,this.setState({loading:!0}),t.next=5,k({name:e});case 5:this.setState({loading:!1},(function(){return n.push("/search")}));case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"loginInputDisplay",value:function(){var t=this.state.loginButtonDisabled;return Object(S.jsxs)("div",{className:"login-container",children:[Object(S.jsx)("input",{type:"text","data-testid":"login-name-input",onChange:this.enableLoginButton,className:"form-control form-control-lg"}),Object(S.jsx)("button",{type:"button","data-testid":"login-submit-button",disabled:t,onClick:this.userLogin,className:"btn btn-dark",children:"Entrar"})]})}},{key:"render",value:function(){var t=this.state.loading;return Object(S.jsx)("div",{"data-testid":"page-login",children:t?Object(S.jsx)(N,{}):this.loginInputDisplay()})}}]),n}(a.Component),U=w,C=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).state={user:"",loading:!0},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=Object(j.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,x();case 3:t.t1=t.sent,t.t2={user:t.t1,loading:!1},t.t0.setState.call(t.t0,t.t2);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.user,n=t.loading,a=this.props.userImage,r=Object(S.jsxs)("span",{"data-testid":"header-user-name",children:[Object(S.jsx)("img",{src:a,alt:"User"}),e.name]});return Object(S.jsxs)("header",{"data-testid":"header-component",children:[Object(S.jsxs)("div",{className:"links",children:[Object(S.jsx)(h.b,{className:"link",to:"/search","data-testid":"link-to-search",children:"Pesquisar"}),Object(S.jsx)(h.b,{className:"link",to:"/favorites","data-testid":"link-to-favorites",children:"Favoritas"}),Object(S.jsx)(h.b,{className:"link",to:"/profile","data-testid":"link-to-profile",children:"Perfil"})]}),n?Object(S.jsx)(N,{}):r]})}}]),n}(a.Component),D=C,B=function(){var t=Object(j.a)(f.a.mark((function t(e){var n,a,r,s,i,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURI(e).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),t.next=4,fetch(a);case 4:return r=t.sent,t.next=7,r.json();case 7:return s=t.sent,i=s.results,c=i.map((function(t){return{artistId:t.artistId,artistName:t.artistName,collectionId:t.collectionId,collectionName:t.collectionName,collectionPrice:t.collectionPrice,artworkUrl100:t.artworkUrl100,releaseDate:t.releaseDate,trackCount:t.trackCount}})),t.abrupt("return",c);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),P=B,F=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).enableSearchButton=t.enableSearchButton.bind(Object(m.a)(t)),t.getSearchResults=t.getSearchResults.bind(Object(m.a)(t)),t.notLoading=t.notLoading.bind(Object(m.a)(t)),t.getUserPicture=t.getUserPicture.bind(Object(m.a)(t)),t.state={searchButtonDisabled:!0,artist:"",loading:!1,image:""},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getUserPicture()}},{key:"getUserPicture",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:e=t.sent,n=e.image,this.setState({image:n});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getSearchResults",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({loading:!0}),e=this.state.artist,t.t0=this,t.next=5,P(e);case 5:t.t1=t.sent,t.t2={searchResults:t.t1,loading:!1},t.t0.setState.call(t.t0,t.t2);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"enableSearchButton",value:function(t){var e=t.target;e.value.length>=2?this.setState({searchButtonDisabled:!1,artist:e.value}):this.setState({searchButtonDisabled:!0,artist:e.value})}},{key:"displaySearchInput",value:function(){var t=this.state.searchButtonDisabled;return Object(S.jsxs)("div",{className:"search-input",children:[Object(S.jsx)("input",{className:"form-control",type:"text","data-testid":"search-artist-input",onChange:this.enableSearchButton}),Object(S.jsx)("button",{type:"button","data-testid":"search-artist-button",disabled:t,onClick:this.getSearchResults,className:"btn btn-dark",children:"Pesquisar"})]})}},{key:"notLoading",value:function(){var t=this.state,e=t.searchResults,n=t.artist;return e?0===e.length?Object(S.jsxs)("div",{className:"search-bigger-container",children:[this.displaySearchInput(),Object(S.jsx)("span",{children:"Nenhum \xe1lbum foi encontrado"})]}):Object(S.jsxs)("div",{className:"search-bigger-container",children:[this.displaySearchInput(),Object(S.jsxs)("p",{children:["Exibindo resultados para:"," ",'"'.concat(n,'"')]}),Object(S.jsx)("div",{className:"search-results",children:e.map((function(t){return Object(S.jsxs)("div",{className:"album-card",children:[Object(S.jsxs)("div",{className:"album-info",children:[Object(S.jsx)("h6",{children:t.collectionName}),Object(S.jsx)(h.b,{to:"/album/".concat(t.collectionId),"data-testid":"link-to-album-".concat(t.collectionId),className:"link",children:"Mais Informa\xe7\xf5es"})]}),Object(S.jsx)("img",{src:t.artworkUrl100,alt:t.collectionName})]},t.collectionId)}))})]}):this.displaySearchInput()}},{key:"render",value:function(){var t=this.state,e=t.loading,n=t.image;return Object(S.jsxs)("div",{"data-testid":"page-search",className:"container",children:[n?Object(S.jsx)(D,{userImage:n}):Object(S.jsx)(D,{}),e?Object(S.jsx)(N,{}):this.notLoading()]})}}]),n}(a.Component),L=F,M=function(){var t=Object(j.a)(f.a.mark((function t(e){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song"));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a.results);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=M,J=n(19),R="favorite_songs";JSON.parse(localStorage.getItem(R))||localStorage.setItem(R,JSON.stringify([]));var q=function(){return JSON.parse(localStorage.getItem(R))},A=function(t){return localStorage.setItem(R,JSON.stringify(t))},K=function(t){return function(e){setTimeout((function(){e(t)}),500)}},V=function(){return new Promise((function(t){var e=q();K(e)(t)}))},T=function(t){return new Promise((function(e){if(t){var n=q();A([].concat(Object(J.a)(n),[t]))}K("OK")(e)}))},z=function(t){return new Promise((function(e){var n=q();A(n.filter((function(e){return e.trackId!==t.trackId}))),K("OK")(e)}))},_=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).state={loading:!1,favoriteSongs:[]},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V();case 2:e=t.sent,this.setState({favoriteSongs:e}),console.log(e);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V();case 2:e=t.sent,this.setState({favoriteSongs:e});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"addFavoriteSong",value:function(){var t=Object(j.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({loading:!0}),t.next=3,T(e);case 3:this.setState({loading:!1});case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"removeFavoriteSong",value:function(){var t=Object(j.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({loading:!0}),t.next=3,z(e);case 3:this.setState({loading:!1});case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"renderFavoriteInput",value:function(t){var e=this,n=this.state.favoriteSongs;return Object(S.jsxs)("label",{htmlFor:"favorite-input",children:["Favorita"," ",n.some((function(e){return e.trackId===t.trackId}))?Object(S.jsx)("input",{type:"checkbox",name:"favorite-input",id:"favorite-input","data-testid":"checkbox-music-".concat(t.trackId),onClick:function(){return e.removeFavoriteSong(t)},checked:!0,className:"form-check-input"}):Object(S.jsx)("input",{type:"checkbox",name:"favorite-input",id:"favorite-input","data-testid":"checkbox-music-".concat(t.trackId),onClick:function(){return e.addFavoriteSong(t)},className:"form-check-input"})]})}},{key:"render",value:function(){var t=this,e=this.props.songsInfo,n=this.state.loading;return Object(S.jsxs)("div",{className:"songs",children:[n&&Object(S.jsx)(N,{}),e.map((function(e){return Object(S.jsxs)("div",{className:"song-card",children:[Object(S.jsx)("div",{className:"song-name",children:Object(S.jsx)("h5",{children:e.trackName})}),Object(S.jsxs)("audio",{"data-testid":"audio-component",src:e.previewUrl,controls:!0,children:[Object(S.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento"," ",Object(S.jsx)("code",{children:"audio"}),"."]}),t.renderFavoriteInput(e)]},e.trackId)}))]})}}]),n}(a.Component),G=_,H=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).state={},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.match.params.id,t.next=3,E(e);case 3:n=t.sent,this.setState({albumInfo:n.filter((function(t){return"song"===t.kind})),artistName:n[0].artistName,albumName:n[0].collectionName});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.artistName,n=t.albumName,a=t.albumInfo;return Object(S.jsxs)("div",{"data-testid":"page-album",className:"container",children:[Object(S.jsx)(D,{}),Object(S.jsx)("h1",{children:"".concat(e," - ").concat(n)}),a&&Object(S.jsx)(G,{songsInfo:a})]})}}]),n}(a.Component),Q=H,W=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).loadFavSongs=t.loadFavSongs.bind(Object(m.a)(t)),t.getUserPicture=t.getUserPicture.bind(Object(m.a)(t)),t.state={favSongs:[],image:""},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.loadFavSongs(),this.getUserPicture()}},{key:"componentDidUpdate",value:function(){this.loadFavSongs()}},{key:"getUserPicture",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:e=t.sent,n=e.image,this.setState({image:n});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"loadFavSongs",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V();case 2:e=t.sent,this.setState({favSongs:e});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.favSongs,n=t.image;return Object(S.jsxs)("div",{"data-testid":"page-favorites",className:"container",children:[n?Object(S.jsx)(D,{userImage:n}):Object(S.jsx)(D,{}),Object(S.jsx)(G,{songsInfo:e})]})}}]),n}(a.Component),X=W,Y=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).renderUserInfo=t.renderUserInfo.bind(Object(m.a)(t)),t.state={loading:!0,userInfo:{image:""}},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:e=t.sent,this.setState({userInfo:e,loading:!1});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"renderUserInfo",value:function(){var t=this.state.userInfo,e=t.name,n=t.email,a=t.image,r=t.description;return Object(S.jsxs)("div",{className:"user-info",children:[Object(S.jsx)("img",{src:a,alt:"User","data-testid":"profile-image"}),Object(S.jsx)("p",{children:e}),Object(S.jsx)("p",{children:n}),Object(S.jsx)("p",{children:r}),Object(S.jsx)(h.b,{to:"profile/edit",className:"link",children:"Editar perfil"})]})}},{key:"render",value:function(){var t=this.state,e=t.loading,n=t.userInfo.image;return Object(S.jsxs)("div",{"data-testid":"page-profile",className:"container",children:[n?Object(S.jsx)(D,{userImage:n}):Object(S.jsx)(D,{}),e?Object(S.jsx)(N,{}):this.renderUserInfo()]})}}]),n}(a.Component),Z=Y,$=n(18),tt=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).renderUserInfo=t.renderUserInfo.bind(Object(m.a)(t)),t.updateStateInfo=t.updateStateInfo.bind(Object(m.a)(t)),t.updateUserInfo=t.updateUserInfo.bind(Object(m.a)(t)),t.state={loading:!0,name:"",email:"",image:"",description:""},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e,n,a,r,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:e=t.sent,n=e.name,a=e.email,r=e.image,s=e.description,this.setState({loading:!1,name:n,email:a,image:r,description:s});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"enableSaveButton",value:function(t){var e=t.target;Object(J.a)(e.parentElement.children).some((function(t){return""===t.value}))?e.parentElement.lastChild.setAttribute("disabled","disabled"):e.parentElement.lastChild.removeAttribute("disabled")}},{key:"updateStateInfo",value:function(t){var e=this,n=t.target;this.setState(Object($.a)({},n.name,n.value),(function(){return e.updateUserInfo()}))}},{key:"updateUserInfo",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e,n,a,r,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state,n=e.name,a=e.email,r=e.image,s=e.description,t.next=3,y({name:n,email:a,image:r,description:s});case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"renderUserInfo",value:function(){var t=this.state,e=t.name,n=t.email,a=t.image,r=t.description,s=this.props.history;return Object(S.jsxs)("form",{onChange:this.enableSaveButton,children:[Object(S.jsx)("input",{name:"name",type:"text","data-testid":"edit-input-name",defaultValue:e,required:!0,onChange:this.updateStateInfo,className:"form-control",placeholder:"Nome"}),Object(S.jsx)("input",{name:"image",type:"text","data-testid":"edit-input-image",defaultValue:a,required:!0,onChange:this.updateStateInfo,className:"form-control",placeholder:"Url da sua foto"}),Object(S.jsx)("input",{name:"email",type:"email","data-testid":"edit-input-email",defaultValue:n,required:!0,onChange:this.updateStateInfo,className:"form-control",placeholder:"Email"}),Object(S.jsx)("textarea",{name:"description","data-testid":"edit-input-description",defaultValue:r,required:!0,onChange:this.updateStateInfo,className:"form-control",placeholder:"Sobre voc\xea"}),Object(S.jsx)("input",{"data-testid":"edit-button-save",type:"button",onClick:function(){return s.push("/profile")},value:"Salvar",className:"form-control btn btn-dark"})]})}},{key:"render",value:function(){var t=this.state,e=t.loading,n=t.image;return Object(S.jsxs)("div",{"data-testid":"page-profile-edit",className:"container",children:[n?Object(S.jsx)(D,{userImage:n}):Object(S.jsx)(D,{}),Object(S.jsx)("h1",{children:"Atualize seu perfil!"}),e?Object(S.jsx)(N,{}):this.renderUserInfo()]})}}]),n}(a.Component),et=tt,nt=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(S.jsx)("div",{"data-testid":"page-not-found"})}}]),n}(a.Component),at=nt,rt=(n(41),function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(S.jsx)("div",{className:"bigger-container",children:Object(S.jsxs)(h.a,{children:[Object(S.jsx)(p.a,{path:"/search",component:L}),Object(S.jsx)(p.a,{path:"/album/:id",render:function(t){return Object(S.jsx)(Q,Object(c.a)({},t))}}),Object(S.jsx)(p.a,{path:"/favorites",component:X}),Object(S.jsx)(p.a,{path:"/profile/edit",component:et}),Object(S.jsx)(p.a,{path:"/profile",exact:!0,component:Z}),Object(S.jsx)(p.a,{path:"/",exact:!0,component:U}),Object(S.jsx)(p.a,{path:"*",component:at})]})})}}]),n}(r.a.Component)),st=rt;i.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(st,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.8b54f665.chunk.js.map